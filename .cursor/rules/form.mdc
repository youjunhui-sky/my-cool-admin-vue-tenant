---
description: cl-form ç»„ä»¶ç¤ºä¾‹
globs: *.tsx, *.ts, *.vue
---
## å±‚çº§æ˜¾ç¤º ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>children</el-tag>
			<span>å±‚çº§æ˜¾ç¤º</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/children.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form"></cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'å±‚çº§æ˜¾ç¤º',
		items: [
			{
				label: 'å§“å',
				prop: 'name',
				component: {
					name: 'el-input'
				}
			},
			{
				label: 'å¹´é¾„',
				prop: 'age',
				value: 18,
				component: {
					name: 'el-input-number'
				}
			},

			// åŸºç¡€ä¿¡æ¯
			{
				component: {
					//ã€å¾ˆé‡è¦ã€‘ä½¿ç”¨ cl-form-card ç»„ä»¶æ¸²æŸ“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰
					name: 'cl-form-card',
					props: {
						// æ ‡é¢˜
						label: 'åŸºç¡€ä¿¡æ¯',
						// æ˜¯å¦å±•å¼€ï¼Œé»˜è®¤ true
						expand: true
					}
				},
				children: [
					{
						label: 'è´¦å·',
						prop: 'account',
						component: {
							name: 'el-input'
						}
					},
					{
						label: 'å¯†ç ',
						prop: 'password',
						component: {
							name: 'el-input'
						}
					}
				]
			},

			// å…¶ä»–ä¿¡æ¯
			{
				component: {
					name: 'cl-form-card',
					props: {
						label: 'å…¶ä»–ä¿¡æ¯',
						expand: false
					}
				},
				children: [
					{
						label: 'èº«ä»½è¯',
						prop: 'idcard',
						component: {
							name: 'el-input'
						}
					},
					{
						label: 'å­¦æ ¡',
						prop: 'school',
						component: {
							name: 'el-input'
						}
					},
					{
						label: 'ä¸“ä¸š',
						prop: 'major',
						component: {
							name: 'el-input'
						}
					}
				]
			}
		],
		on: {
			submit(data, { close }) {
				close();
			}
		}
	});
}
</script>

```

## ç»„ä»¶æ¸²æŸ“ ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>component</el-tag>
			<span>ç»„ä»¶æ¸²æŸ“</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code
				:files="[
					'form/component/index.vue',
					'form/component/select-labels.vue',
					'form/component/select-status.vue',
					'form/component/select-work.vue',
					'form/component/select-work2.vue'
				]"
			/>

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form">
				<!-- å¹´é¾„æ’æ§½ -->
				<template #slot-age="{ scope }">
					<!-- scope ä¸ºè¡¨å•å€¼ -->
					<el-input-number v-model="scope.age" :min="18" :max="100"></el-input-number>
				</template>
			</cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';
import { ElMessage } from 'element-plus';
import SelectWork from './select-work2.vue';
import SelectLabels from './select-labels.vue';
import SelectStatus from './select-status.vue';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'ç»„ä»¶é…ç½®',

		items: [
			{
				label: 'æ˜µç§°',
				prop: 'name',
				// ç»„ä»¶é…ç½®æ–¹å¼1ï¼šæ ‡ç­¾åï¼ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ä¸å»ºè®®ç»„ä»¶å…¨å±€æ³¨å†Œï¼‰
				value: 'ç¥ä»™',
				component: {
					// å¿…é¡»æ˜¯â€œå…¨å±€æ³¨å†Œâ€çš„ç»„ä»¶åï¼Œå¦‚ element-plus çš„ el-inputã€el-date-picker ç­‰
					name: 'el-input'
				}
			},
			{
				label: 'æ‰‹æœºå·',
				prop: 'phone',
				value: '13255022000',
				component: {
					name: 'el-input',
					// è‡ªå®šä¹‰æ’æ§½
					slots: {
						prepend() {
							return '+86';
						}
					}
				}
			},
			{
				label: 'å¹´é¾„',
				prop: 'age',
				// ç»„ä»¶é…ç½®æ–¹å¼2ï¼šæ’æ§½ï¼ˆä¸‡èƒ½ï¼Œå°±æ˜¯ä»£ç å¤šå†™ç‚¹ï¼‰
				value: 18,
				component: {
					// å¿…é¡»æ˜¯ "slot-" å¼€å¤´
					name: 'slot-age'
				}
			},
			// -- start ç»„ä»¶é…ç½®æ–¹å¼3ï¼šç»„ä»¶å®ä¾‹ï¼ˆä¸æƒ³å…¨å±€æ³¨å†Œï¼Œä½†åˆæƒ³ç»„ä»¶åŒ–ï¼‰
			{
				label: 'å·¥ä½œ',
				prop: 'work',
				value: 'è®¾è®¡',
				component: {
					// åŒå‘ç»‘å®š
					vm: SelectWork
				}
			},
			{
				label: 'æ ‡ç­¾',
				prop: 'labels',
				value: ['å¤šé‡‘', 'æ·±æƒ…'],
				component: {
					// scope[prop]ç»‘å®š
					vm: SelectLabels
				}
			},
			{
				label: 'çŠ¶æ€',
				prop: 'status',
				value: 1,
				component: {
					// useForm ç»‘å®š
					vm: SelectStatus
				}
			}
			// -- end
		],
		on: {
			submit(data, { close }) {
				ElMessage.info(
					`${data.name || 'æ— å'}ï¼ˆ${data.age || 18}å²ï¼‰å·¥ä½œï¼š${data.work || 'æ— '}`
				);
				close();
			}
		}
	});
}
</script>

```

## select-labels ç¤ºä¾‹

```vue
<template>
	<!--ã€å¾ˆé‡è¦ã€‘ç›´æ¥ç»‘å®šè¡¨å•å€¼ scope[prop] -->
	<!-- !ç¬¦å·ï¼Œåªæ˜¯ä¸ºäº†ç±»å‹æç¤ºä¸é”™è¯¯ -->
	<el-select v-model="scope[prop!]" multiple>
		<el-option
			v-for="(item, index) in list"
			:key="index"
			:label="item.label"
			:value="item.label"
		/>
	</el-select>
</template>

<!--ã€å¾ˆé‡è¦ã€‘å¿…é¡»è¦æœ‰nameï¼Œé¿å…æ³¨å†Œåå’Œå…¶ä»–å†²çª -->
<script setup lang="ts">
defineOptions({
	name: 'select-labels'
});

import { ref } from 'vue';

const props = defineProps({
	scope: null, // è¡¨å•å€¼
	prop: String // è¡¨å•é¡¹é…ç½®çš„ prop
});

// é€‰é¡¹åˆ—è¡¨
const list = ref<{ label: string; value: string }[]>([
	{
		label: 'å¸…æ°”',
		value: 'å¸…æ°”' // æµ‹è¯•ç›´æ¥ä½¿ç”¨labelï¼ŒçœŸå®æƒ…å†µå¯èƒ½æ˜¯1ï¼Œ2ï¼Œ3ï¼Œ4æˆ–è€…id
	},
	{
		label: 'å¤šé‡‘',
		value: 'å¤šé‡‘'
	},
	{
		label: 'æ·±æƒ…',
		value: 'æ·±æƒ…'
	}
]);
</script>

```

## select-status ç¤ºä¾‹

```vue
<template>
	<!--ã€å¾ˆé‡è¦ã€‘ç›´æ¥ç»‘å®šstatusï¼Œæˆ–è€…ä½¿ç”¨ form[prop!] -->
	<el-radio-group v-model="form.status">
		<el-radio v-for="(item, index) in list" :key="index" :value="item.value">
			{{ item.label }}
		</el-radio>
	</el-radio-group>
</template>

<!--ã€å¾ˆé‡è¦ã€‘å¿…é¡»è¦æœ‰nameï¼Œé¿å…æ³¨å†Œåå’Œå…¶ä»–å†²çª -->
<script setup lang="ts">
defineOptions({
	name: 'select-status'
});

import { useForm } from '@cool-vue/crud';
import { computed, ref } from 'vue';

const props = defineProps({
	scope: null, // è¡¨å•å€¼
	prop: String // è¡¨å•é¡¹é…ç½®çš„ prop
});

// ä½¿ç”¨ useFormï¼Œèƒ½ç›´æ¥è·å–åˆ°ä¸Šçº§çš„è¡¨å•å®ä¾‹ï¼Œ
// æ¯”å¦‚æ“ä½œè¡¨å•çš„ Form.value?.submitã€Form.value?.closeç­‰
// è·å–è¡¨å•å€¼ï¼ŒForm.value?.form
const Form = useForm();

// è¡¨å•å€¼ï¼ŒåŒ…ä¸€å±‚ä¸ä¼šå¤ªéš¾å—
const form = computed(() => Form.value?.form || {});

// é€‰é¡¹åˆ—è¡¨
const list = ref<{ label: string; value: number }[]>([
	{
		label: 'å¾ˆå¥½',
		value: 1
	},
	{
		label: 'ä¸èˆ’æœ',
		value: 2
	},
	{
		label: 'è¦å˜äº†',
		value: 3
	}
]);
</script>

```

## select-work ç¤ºä¾‹

```vue
<template>
	<el-select v-model="active" @change="onChange">
		<el-option
			v-for="(item, index) in list"
			:key="index"
			:label="item.label"
			:value="item.label"
		/>
	</el-select>
</template>

<!-- ã€å¾ˆé‡è¦ã€‘å¿…é¡»è¦æœ‰nameï¼Œé¿å…æ³¨å†Œåå’Œå…¶ä»–å†²çª -->
<script setup lang="ts">
defineOptions({
	name: 'select-work'
});

import { ref, watch } from 'vue';

const props = defineProps({
	modelValue: String
});

const emit = defineEmits(['update:modelValue', 'change']);

//ã€å¾ˆé‡è¦ã€‘ç»‘å®šå€¼
// è¿™ç§æ–¹å¼è™½ç„¶éº»çƒ¦ï¼Œä½†æ˜¯å¯æ‰©å±•æ€§é«˜ï¼Œä¸€äº›å¤æ‚çš„æ•°æ®ç»“æ„å¯ä»¥æŒ‰è¿™ç§æ–¹å¼ç»‘å®šå€¼
const active = ref();

// é€‰é¡¹åˆ—è¡¨
const list = ref<{ label: string; value: string }[]>([
	{
		label: 'å€’èŒ¶',
		value: 'å€’èŒ¶' // æµ‹è¯•ç›´æ¥ä½¿ç”¨labelï¼ŒçœŸå®æƒ…å†µå¯èƒ½æ˜¯1ï¼Œ2ï¼Œ3ï¼Œ4æˆ–è€…id
	},
	{
		label: 'è®¾è®¡',
		value: 'è®¾è®¡'
	},
	{
		label: 'å¼€å‘',
		value: 'å¼€å‘'
	}
]);

//ã€å¾ˆé‡è¦ã€‘æ›´æ–°ç»‘å®šå€¼ï¼Œè¡¨å•æäº¤æ‰èƒ½å¾—åˆ°é€‰æ‹©åçš„
function onChange(val: string) {
	emit('update:modelValue', val);
	emit('change', val);
}

//ã€å¾ˆé‡è¦ã€‘ä½¿ç”¨ç›‘å¬çš„æ–¹å¼ï¼Œé¿å…è¡¨å•æ‰“å¼€æ•°æ®æ˜¯å¼‚æ­¥è·å–çš„æƒ…å†µ
watch(
	() => props.modelValue,
	val => {
		// è®¾ç½®é€‰ä¸­çš„å€¼
		active.value = val;
	},
	{
		immediate: true
	}
);
</script>

```

## select-work2 ç¤ºä¾‹

```vue
<template>
	<el-select v-model="active">
		<el-option
			v-for="(item, index) in list"
			:key="index"
			:label="item.label"
			:value="item.label"
		/>
	</el-select>
</template>

<!-- ã€å¾ˆé‡è¦ã€‘å¿…é¡»è¦æœ‰nameï¼Œé¿å…æ³¨å†Œåå’Œå…¶ä»–å†²çª -->
<script setup lang="ts">
defineOptions({
	name: 'select-work2'
});

import { ref, useModel } from 'vue';

const props = defineProps({
	modelValue: String
});

//ã€å¾ˆé‡è¦ã€‘ç»‘å®šå€¼ï¼Œä½¿ç”¨ useModel çš„æ–¹å¼åŒå‘ç»‘å®š
const active = useModel(props, 'modelValue');

// é€‰é¡¹åˆ—è¡¨
const list = ref<{ label: string; value: string }[]>([
	{
		label: 'å€’èŒ¶',
		value: 'å€’èŒ¶' // æµ‹è¯•ç›´æ¥ä½¿ç”¨labelï¼ŒçœŸå®æƒ…å†µå¯èƒ½æ˜¯1ï¼Œ2ï¼Œ3ï¼Œ4æˆ–è€…id
	},
	{
		label: 'è®¾è®¡',
		value: 'è®¾è®¡'
	},
	{
		label: 'å¼€å‘',
		value: 'å¼€å‘'
	}
]);
</script>

```

## å‚æ•°é…ç½® ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>config</el-tag>
			<span>å‚æ•°é…ç½®</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/config.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form">
				<!-- æŒ‰é’®æ’æ§½ -->
				<template #slot-btns>
					<el-button type="danger">æŒ‰é’®æ’æ§½</el-button>
				</template>
			</cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';
import { ElMessage } from 'element-plus';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'å‚æ•°é…ç½®',

		// æ‰“å¼€æ˜¯å¦é‡ç½®è¡¨å•
		isReset: false,

		// é»˜è®¤è¡¨å•å€¼
		form: {
			nickName: 'ç¥ä»™éƒ½æ²¡ç”¨'
		},

		// è¡¨å•é…ç½®
		props: {
			// æ ‡ç­¾å®½åº¦
			labelWidth: '120px',

			// æ ‡ç­¾ä½ç½®
			labelPosition: 'top'
		},

		// çª—å£çš„é«˜ã€‚é…ç½®åï¼Œåœ¨çª—å£å†…éƒ¨æ»šåŠ¨ã€‚é»˜è®¤æ•´ä¸ªé¡µé¢æ»šåŠ¨
		height: '60vh',

		// çª—å£çš„å®½ï¼Œé»˜è®¤ 50%
		width: '60%',

		// çª—å£è®¾ç½®
		dialog: {
			// æ˜¯å¦éšè—å¤´éƒ¨
			hideHeader: false,

			// é¡¶éƒ¨æ“ä½œæŒ‰é’®ï¼Œé»˜è®¤["fullscreen", "close"]
			// fullscreen å…¨å±
			// close å…³é—­
			controls: ['close']
		},

		// åº•éƒ¨æ“ä½œæŒ‰é’®
		op: {
			// é»˜è®¤é å³å¸ƒå±€
			justify: 'flex-end',

			// ä¿å­˜æŒ‰é’®æ–‡å­—
			saveButtonText: 'æäº¤',

			// å…³é—­æŒ‰é’®æ–‡å­—
			closeButtonText: 'å…³é—­',

			// æ˜¯å¦éšè—
			hidden: false,

			// æŒ‰é’®é…ç½®
			buttons: [
				// è‡ªå®šä¹‰
				{
					label: 'è‡ªå®šä¹‰æŒ‰é’®',
					onClick() {
						ElMessage.success('è‡ªå®šä¹‰æŒ‰é’®ç‚¹å‡»');
					}
				},
				// close å…³é—­
				'close',
				// save ä¿å­˜
				'save',
				// æ’æ§½ä½¿ç”¨ï¼Œé…åˆ templateï¼Œå¾€ä¸Šçœ‹ cl-form ç»„ä»¶
				'slot-btns'
			]
		},

		// è¡¨å•é¡¹é…ç½®
		items: [
			{
				label: 'æ˜µç§°',
				prop: 'nickName',
				component: {
					name: 'el-input'
				}
			}
		],

		// äº‹ä»¶
		on: {
			submit(data, { close }) {
				close();
			}
		}
	});
}
</script>

```

## å†…åµŒCRUD ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>crud</el-tag>
			<span>å†…åµŒCRUD</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/crud.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form">
				<template #slot-crud>
					<cl-crud ref="Crud" border>
						<cl-row>
							<!-- åˆ·æ–°æŒ‰é’® -->
							<cl-refresh-btn />
							<!-- æ–°å¢æŒ‰é’® -->
							<cl-add-btn />
							<!-- åˆ é™¤æŒ‰é’® -->
							<cl-multi-delete-btn />
							<cl-flex1 />
							<!-- å…³é”®å­—æœç´¢ -->
							<cl-search-key placeholder="æœç´¢å§“åã€æ‰‹æœºå·" />
						</cl-row>

						<cl-row>
							<!-- æ•°æ®è¡¨æ ¼ -->
							<cl-table ref="Table" />
						</cl-row>

						<cl-row>
							<cl-flex1 />
							<!-- åˆ†é¡µæ§ä»¶ -->
							<cl-pagination />
						</cl-row>

						<!-- æ–°å¢ã€ç¼–è¾‘ -->
						<cl-upsert ref="Upsert" />
					</cl-crud>
				</template>
			</cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useCrud, useForm, useTable, useUpsert } from '@cool-vue/crud';

// cl-upsert
const Upsert = useUpsert({
	items: [
		{
			label: 'å§“å',
			prop: 'name',
			component: {
				name: 'el-input'
			}
		},
		{
			label: 'åˆ›å»ºæ—¶é—´',
			prop: 'createTime',
			component: {
				name: 'el-date-picker'
			}
		}
	]
});

// cl-table
const Table = useTable({
	autoHeight: false,
	columns: [
		{
			type: 'selection'
		},
		{
			label: 'å§“å',
			prop: 'name',
			minWidth: 140
		},
		{
			label: 'æ‰‹æœºå·',
			prop: 'phone',
			minWidth: 140
		},
		{
			type: 'op'
		}
	]
});

// cl-crud
const Crud = useCrud(
	{
		service: 'test'
	},
	app => {
		app.refresh({
			size: 10
		});
	}
);

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'å†…åµŒCRUD',
		props: {
			labelPosition: 'top'
		},
		dialog: {
			height: '70vh',
			width: '1000px'
		},
		items: [
			{
				label: 'å§“å',
				prop: 'name',
				component: {
					name: 'el-input',
					props: {
						placeholder: 'è¯·å¡«å†™å§“å'
					}
				},
				rules: {
					required: true,
					message: 'å§“åä¸èƒ½ä¸ºç©º'
				}
			},
			{
				label: 'å†…åµŒ cl-crud',
				component: {
					name: 'slot-crud'
				}
			}
		],
		on: {
			submit() {
				Form.value?.close();
			}
		}
	});
}
</script>

```

## ç»„ä»¶ç¦ç”¨ ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>disabled</el-tag>
			<span>ç»„ä»¶ç¦ç”¨</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/disabled.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form"></cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'ç»„ä»¶ç¦ç”¨',
		items: [
			{
				label: 'è´¦å·',
				prop: 'account',
				component: {
					name: 'el-input',
					props: {
						// è®¾ç½® boolean å€¼æ§åˆ¶ç»„ä»¶çš„ç¦ç”¨çŠ¶æ€ï¼ˆå‰ææ˜¯ç»„ä»¶æ”¯æŒè¿™ä¸ªå‚æ•°ï¼Œelement çš„ç»„ä»¶å‡ ä¹éƒ½æœ‰ï¼‰
						disabled: true
					}
				}
			},
			{
				label: 'å¯†ç ',
				prop: 'password',
				component: {
					name: 'el-input'
				}
			}
		],
		on: {
			open() {
				// é€šç”¨ setProps æ–¹æ³•å»è®¾ç½® disabled, 1.5såç¦ç”¨
				setTimeout(() => {
					Form.value?.setProps('password', { disabled: true });
				}, 1500);
			},

			submit(data, { close }) {
				close();
			}
		}
	});
}
</script>

```

## ç»„ä»¶äº‹ä»¶ ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>event</el-tag>
			<span>ç»„ä»¶äº‹ä»¶</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/event.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form"></cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';
import { ElMessage } from 'element-plus';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'ç»„ä»¶äº‹ä»¶',
		items: [
			{
				label: 'è´¦å·',
				prop: 'account',
				component: {
					name: 'el-input',
					props: {
						// ç»„ä»¶å†… emit çš„ç”¨ on[name] æ¥æ”¶ï¼Œå¦‚ onChangeã€onInputã€onBlur ç­‰
						// å‰ææ˜¯ç»„ä»¶å†…æœ‰è§¦å‘äº‹ä»¶
						onBlur() {
							ElMessage.info('è´¦å·æ£€æŸ¥ä¸­');
						}
					}
				}
			},
			{
				label: 'æ˜¯å¦å®å',
				prop: 'status',
				value: 1,
				component: {
					name: 'el-radio-group',
					options: [
						{
							label: 'å…³é—­',
							value: 0
						},
						{
							label: 'å¼€å¯',
							value: 1
						}
					],
					props: {
						// å€¼æ”¹å˜äº‹ä»¶
						onChange(val: number) {
							if (val == 1) {
								// æ˜¾ç¤ºè¡¨å•é¡¹
								Form.value?.showItem('idcard');
							} else {
								// éšè—è¡¨å•é¡¹
								Form.value?.hideItem('idcard');
								// æ¸…ç©ºå€¼
								Form.value?.setForm('idcard', undefined);
							}
						}
					}
				}
			},
			{
				label: 'èº«ä»½è¯',
				prop: 'idcard',
				component: {
					name: 'el-input'
				}
			}
		],
		on: {
			submit(data, { close }) {
				close();
			}
		}
	});
}
</script>

```

## åˆ†ç»„æ˜¾ç¤º ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>group</el-tag>
			<span>åˆ†ç»„æ˜¾ç¤º</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/group.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form"></cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'åˆ†ç»„æ˜¾ç¤º',
		items: [
			{
				//ã€å¾ˆé‡è¦ã€‘å¿…é¡»ä¸º tabs
				type: 'tabs',
				props: {
					// åˆ†ç»„æ ·å¼
					type: 'card',
					// åˆ†ç»„åˆ—è¡¨ï¼Œå¿…é¡»æ˜¯ { label, value } çš„æ•°ç»„æ ¼å¼
					labels: [
						{
							label: 'åŸºç¡€ä¿¡æ¯', // æ ‡é¢˜
							value: 'base' // å”¯ä¸€æ ‡è¯†
						},
						{
							label: 'è®¤è¯ä¿¡æ¯',
							value: 'auth'
						}
					]
				}
			},
			// åŸºç¡€ä¿¡æ¯
			{
				group: 'base', // æ ‡è¯†
				label: 'è´¦å·',
				prop: 'account',
				required: true,
				component: {
					name: 'el-input'
				}
			},
			{
				group: 'base', // æ ‡è¯†
				label: 'å¯†ç ',
				prop: 'password',
				required: true,
				component: {
					name: 'el-input'
				}
			},

			// å…¶ä»–ä¿¡æ¯ group = other
			{
				group: 'auth', // æ ‡è¯†
				label: 'èº«ä»½è¯',
				prop: 'idcard',
				required: true,
				component: {
					name: 'el-input'
				}
			},
			{
				group: 'auth', // æ ‡è¯†
				label: 'å­¦æ ¡',
				prop: 'school',
				component: {
					name: 'el-input'
				}
			},
			{
				group: 'auth', // æ ‡è¯†
				label: 'ä¸“ä¸š',
				prop: 'major',
				component: {
					name: 'el-input'
				}
			}
		],
		on: {
			//ã€æç¤ºã€‘å½“ç¬¬ä¸€ç»„éªŒè¯é€šè¿‡åï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ç»„å±•ç¤ºï¼Œç›´åˆ°å…¨éƒ¨é€šè¿‡æ‰å¯æäº¤
			submit(data, { close }) {
				close();
			}
		}
	});
}
</script>

```

## éšè—/æ˜¾ç¤º ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>hidden</el-tag>
			<span>éšè—/æ˜¾ç¤º</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/hidden.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form"></cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'éšè—/æ˜¾ç¤º',
		items: [
			{
				label: 'çŠ¶æ€',
				prop: 'status',
				value: 0,
				component: {
					name: 'el-radio-group',
					options: [
						{
							label: 'å…³é—­',
							value: 0
						},
						{
							label: 'å¼€å¯',
							value: 1
						}
					]
				}
			},
			{
				label: 'è´¦å·',
				prop: 'account',
				component: {
					name: 'el-input'
				}
			},
			{
				//ã€å¾ˆé‡è¦ã€‘æ˜¯å¦éšè—
				hidden({ scope }) {
					// scope ä¸ºè¡¨å•å€¼
					// è¿”å›ä¸€ä¸ª boolean æ¥æ§åˆ¶å½“å‰è¡¨å•é¡¹çš„éšè—/æ˜¾ç¤º
					return scope.status != 1;
				},
				label: 'å¯†ç ',
				prop: 'password',
				component: {
					name: 'el-input'
				}
			}
		],
		on: {
			submit(data, { close }) {
				close();
			}
		}
	});
}
</script>

```

## å¸ƒå±€ ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>layout</el-tag>
			<span>å¸ƒå±€</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/layout.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form"></cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'å¸ƒå±€',
		items: [
			{
				//ã€spanã€‘å‚è€ƒæ–‡æ¡£ï¼šhttps://element-plus.gitee.io/zh-CN/component/layout.html
				// ä½¿ç”¨ 1/24 åˆ†æ ï¼Œé»˜è®¤ 24
				span: 12,
				label: 'æ˜µç§°',
				prop: 'nickname',
				component: {
					name: 'el-input'
				}
			},
			{
				span: 12,
				label: 'æ‰‹æœºå·',
				prop: 'phone',
				component: {
					name: 'el-input',
					props: {
						maxlength: 11
					}
				}
			},
			{
				//ã€flexã€‘ä½¿å®½åº¦ä¸å¡«å……æ»¡
				flex: false,
				label: 'æ ‡ç­¾',
				prop: 'label',
				component: {
					name: 'el-input'
				}
			},
			{
				label: 'çŠ¶æ€',
				prop: 'status',
				value: 1,
				component: {
					name: 'el-radio-group',
					options: [
						{
							label: 'å¼€å¯',
							value: 1
						},
						{
							label: 'å…³é—­',
							value: 0
						}
					]
				}
			},
			{
				label: 'å¤‡æ³¨',
				prop: 'remark',
				component: {
					name: 'el-input',
					props: {
						type: 'textarea',
						rows: 4
					}
				}
			}
		],
		on: {
			submit(data, { close }) {
				close();
			}
		}
	});
}
</script>

```

## èµ·æ­¥ ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>open</el-tag>
			<span>èµ·æ­¥</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/open.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<!--ã€å¾ˆé‡è¦ã€‘ref ä¸€å®šè¦å¯¹åº” useForm å®šä¹‰çš„å€¼ -->
			<cl-form ref="Form"></cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="tsx">
import { useForm } from '@cool-vue/crud';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'èµ·æ­¥',

		items: [
			{
				label: 'æ˜µç§°',
				// ç»‘å®šå€¼çš„æ ‡è¯†ï¼Œè¡¨å•æäº¤åŠå›æ˜¾ä¼šè‡ªåŠ¨æ ¹æ® prop è·å–å¯¹åº”çš„å€¼
				prop: 'nickname',
				// ç»„ä»¶ç»‘å®š
				component: {
					// å¿…é¡»æ˜¯â€œå…¨å±€æ³¨å†Œâ€çš„ç»„ä»¶åï¼Œå¦‚ element-plus çš„ el-inputã€el-date-picker ç­‰
					name: 'el-input',

					// ç»‘å®šçš„ç»„ä»¶å‚æ•°é…ç½®ï¼Œå¦‚ clearableã€placeholder ç­‰
					// ç»„ä»¶å†… emit çš„ç”¨ on[name] æ¥æ”¶ï¼Œå¦‚ onChangeã€onInputã€onBlur ç­‰
					props: {
						placeholder: 'è¯·è¾“å…¥æ˜µç§°',
						clearable: true,
						onChange(value: string) {}
					}
				}
			},
			{
				prop: 'age',
				component: {
					name: 'el-input-number'
				},
				// é»˜è®¤å€¼ï¼Œç¬¬ä¸€æ¬¡æ‰“å¼€æœ‰æ•ˆ
				value: 18
			}
		],
		on: {
			// æ‰“å¼€æ—¶è§¦å‘
			open() {
				console.log(Form.value?.validateField);
			},

			// å…³é—­æ—¶è§¦å‘ã€‚å½“é…ç½®è¯¥æ–¹æ³•æ—¶ï¼Œå…³é—­äº‹ä»¶ä¼šè¢«é˜»æ–­ï¼Œä½¿ç”¨ done() å…³é—­çª—å£
			close(action, done) {
				// action ä¸ºå…³é—­çª—å£çš„è§¦å‘åŠ¨ä½œ "save" | "close"
				// done å…³é—­äº‹ä»¶
				done();
			},

			// æäº¤æ—¶è§¦å‘
			submit(data, { done, close }) {
				// data ä¸ºè¡¨å•å€¼
				// done å…³é—­åŠ è½½äº‹ä»¶ã€ä½†ä¸å…³é—­çª—å£
				// close å…³é—­çª—å£

				close();
			}
		}
	});
}
</script>

```

## é€‰é¡¹æ¡†é…ç½® ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>options</el-tag>
			<span>é€‰é¡¹æ¡†é…ç½®</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/options.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form"></cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';
import { computed, reactive } from 'vue';

const Form = useForm();

// è§‰å¾—éº»çƒ¦å°± anyï¼Œå¦‚ { user: [] as any[] }
const options = reactive<{ [key: string]: { label: string; value: any }[] }>({
	user: []
});

function open() {
	Form.value?.open({
		title: 'é€‰é¡¹æ¡†é…ç½®',
		items: [
			{
				label: 'ä¸‹æ‹‰æ¡†',
				prop: 'select',
				component: {
					name: 'el-select',
					props: {
						clearable: true // å¯æ¸…é™¤
					},
					options: [
						{
							label: 'javascript',
							value: 1
						},
						{
							label: 'vue',
							value: 2
						},
						{
							label: 'html',
							value: 3
						},
						{
							label: 'css',
							value: 4
						}
					]
				}
			},
			{
				label: 'å•é€‰æ¡†',
				prop: 'radio',
				value: 1,
				component: {
					name: 'el-radio-group',
					options: [
						{
							label: 'æ‰‹æœº',
							value: 1
						},
						{
							label: 'ç”µè„‘',
							value: 2
						},
						{
							label: 'ç”µè§†',
							value: 3
						}
					]
				}
			},
			{
				label: 'å¤šé€‰æ¡†',
				prop: 'checkbox',
				value: [2, 3],
				component: {
					name: 'el-checkbox-group',
					options: [
						{
							label: 'å’–å•¡',
							value: 1
						},
						{
							label: 'æ±‰å ¡',
							value: 2
						},
						{
							label: 'ç‚¸é¸¡',
							value: 3
						},
						{
							label: 'å¥¶èŒ¶',
							value: 4
						}
					]
				}
			},
			{
				label: 'åŠ¨æ€é…ç½®1',
				prop: 'd1',
				component: {
					name: 'el-select',
					// åŠ¨æ€è®¾ç½®æ–¹æ³•1ï¼Œåœ¨ on.open äº‹ä»¶é…ç½® options
					options: []
				}
			},
			{
				label: 'åŠ¨æ€é…ç½®2',
				prop: 'd2',
				component: {
					name: 'el-select',
					// åŠ¨æ€è®¾ç½®æ–¹æ³•2ï¼Œä½¿ç”¨ computed æ›´æ–° options
					options: computed(() => options.user)
				}
			}
		],
		on: {
			open() {
				// æ¨¡æ‹Ÿ 1.5s åå–çš„æ•°æ®
				setTimeout(() => {
					// åŠ¨æ€è®¾ç½®æ–¹æ³•1ï¼Œä½¿ç”¨ setOptions æ–¹æ³•è®¾ç½®
					// d1 ä¸º prop å€¼
					Form.value?.setOptions('d1', [
						{
							label: 'ğŸ˜Š',
							value: 1
						},
						{
							label: 'ğŸ˜­',
							value: 2
						},
						{
							label: 'ğŸ˜˜',
							value: 3
						}
					]);

					// åŠ¨æ€è®¾ç½®æ–¹æ³•2ï¼Œç›´æ¥è®¾ç½® options.userï¼Œç”± computed æ›´æ–°
					options.user = [
						{
							label: 'ğŸ’°',
							value: 1
						},
						{
							label: 'ğŸš—',
							value: 2
						}
					];
				}, 1500);
			},
			submit(data, { close }) {
				close();
			}
		}
	});
}
</script>

```

## æ’ä»¶çš„ä½¿ç”¨ ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>plugin</el-tag>
			<span>æ’ä»¶çš„ä½¿ç”¨</span>
		</div>

		<div class="c">
			<el-button @click="open('manager')">ç®¡ç†è€…</el-button>
			<el-button @click="open('user')">ç”¨æˆ·</el-button>
			<demo-code :files="['form/plugin/index.vue', 'form/plugin/role.ts']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form"></cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';
import { setRole } from './role';

const Form = useForm();

function open(role: string) {
	Form.value?.open(
		{
			title: 'æ’ä»¶çš„ä½¿ç”¨',

			items: [
				{
					label: 'å§“å',
					prop: 'name',
					required: true,
					component: {
						name: 'el-input'
					}
				},
				{
					// è‡ªå®šä¹‰å‚æ•° roleï¼ŒåŒ¹é…æ’ä»¶ä¼ å…¥çš„è§’è‰²
					role: 'user',
					label: 'é¢è¯•èŒä½',
					prop: 'work',
					value: 1,
					component: {
						name: 'el-radio-group',
						options: [
							{
								label: 'å‰ç«¯å¼€å‘',
								value: 1
							},
							{
								label: 'åç«¯å¼€å‘',
								value: 2
							},
							{
								label: 'UIè®¾è®¡',
								value: 3
							}
						]
					}
				},
				{
					role: 'user',
					label: 'æœŸæœ›è–ªèµ„',
					prop: 'salary',
					value: 5000,
					component: {
						name: 'el-input-number',
						props: {
							min: 2000,
							max: 100000
						}
					}
				},
				{
					role: 'manager',
					label: 'å…¥èŒæ—¶é—´',
					prop: 'date',
					component: {
						name: 'el-date-picker'
					}
				},
				{
					role: 'manager',
					label: 'è´Ÿè´£äºº',
					prop: 'head',
					component: {
						name: 'el-input'
					}
				}
			],
			on: {
				submit(data, { done, close }) {
					close();
				}
			}
		},
		[
			// è‡ªå®šä¹‰æ’ä»¶ï¼Œè§’è‰²æƒé™æ§åˆ¶
			setRole(role)
		]
	);
}
</script>

```

## å¿…å¡«é¡¹é…ç½® ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>required</el-tag>
			<span>å¿…å¡«é¡¹é…ç½®</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/required.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form"></cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'å¿…å¡«é¡¹é…ç½®',
		items: [
			{
				label: 'æ˜µç§°',
				prop: 'nickname',
				component: {
					name: 'el-input'
				},
				// æ˜¯å¦å¿…å¡«ï¼Œé»˜è®¤åˆ¤æ–­ç»‘å®šå€¼æ˜¯å¦ç©º
				required: true
			},
			{
				label: 'æ‰‹æœºå·',
				prop: 'phone',
				component: {
					name: 'el-input',
					props: {
						maxlength: 11
					}
				},
				// è‡ªå®šä¹‰è§„åˆ™
				// åŸºç¡€ç”¨æ³•å¯å‚è€ƒï¼šhttps://element-plus.gitee.io/zh-CN/component/form.html
				// é«˜çº§ç”¨æ³•å¯å‚è€ƒï¼šhttps://github.com/yiminghe/async-validator
				rules: [
					{
						required: true,
						validator: (rule, value, callback) => {
							if (value === '') {
								callback(new Error('æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'));
							} else if (!/^1[3456789]\d{9}$/.test(value)) {
								callback(new Error('æ‰‹æœºå·æ ¼å¼é”™è¯¯'));
							} else {
								callback();
							}
						}
					}
				]
			}
		],
		on: {
			submit(data, { close }) {
				close();
			}
		}
	});
}
</script>

```

## æ·»åŠ /åˆ é™¤è¡¨å•é¡¹ ç¤ºä¾‹

```vue
<template>
	<div class="scope">
		<div class="h">
			<el-tag size="small" effect="dark" disable-transitions>rules</el-tag>
			<span>æ·»åŠ /åˆ é™¤è¡¨å•é¡¹</span>
		</div>

		<div class="c">
			<el-button @click="open">é¢„è§ˆ</el-button>
			<demo-code :files="['form/rules.vue']" />

			<!-- è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ -->
			<cl-form ref="Form">
				<template #slot-cert="{ scope }">
					<div class="cert">
						<!--ã€å¾ˆé‡è¦ã€‘propã€rules é…ç½®æ ¼å¼å¦‚ä¸‹ -->
						<el-form-item
							v-for="(item, index) in scope.cert"
							:key="index"
							:label="`è¯ä¹¦${index + 1}`"
							:prop="`cert.${index}.label`"
							:rules="{
								message: `è¯·å¡«å†™è¯ä¹¦${index + 1}`,
								required: true
							}"
						>
							<div class="row">
								<!-- è¾“å…¥æ¡† -->
								<el-input v-model="item.label" placeholder="è¯·å¡«å†™è¯ä¹¦"></el-input>

								<!-- åˆ é™¤è¡Œ -->
								<el-icon @click="rowDel(index)">
									<delete />
								</el-icon>
							</div>
						</el-form-item>

						<!-- æ·»åŠ è¡Œ -->
						<el-row type="flex" justify="end">
							<el-button @click="rowAdd()">æ·»åŠ è¯ä¹¦</el-button>
						</el-row>
					</div>
				</template>
			</cl-form>
		</div>

		<div class="f">
			<span class="date">2024-01-01</span>
		</div>
	</div>
</template>

<script setup lang="ts">
import { useForm } from '@cool-vue/crud';
import { Delete } from '@element-plus/icons-vue';

const Form = useForm();

function open() {
	Form.value?.open({
		title: 'æ·»åŠ /åˆ é™¤è¡¨å•é¡¹',
		items: [
			{
				label: 'æ˜µç§°',
				prop: 'nickname',
				component: {
					name: 'el-input'
				},
				required: true
			},
			{
				prop: 'cert',
				//ã€å¾ˆé‡è¦ã€‘é»˜è®¤æ•°æ®æ ¼å¼ï¼Œä»¥å®é™…ä¸šåŠ¡ä¸ºä¸»ã€‚
				value: [
					{
						label: ''
					}
				],
				component: {
					name: 'slot-cert'
				}
			}
		],
		on: {
			submit(data, { close }) {
				close();
			}
		}
	});
}

function rowAdd() {
	Form.value?.form.cert.push({
		label: ''
	});
}

function rowDel(index: number) {
	Form.value?.form.cert.splice(index, 1);
}
</script>

<style lang="scss" scoped>
.cert {
	.row {
		display: flex;
		align-items: center;

		.el-input {
			flex: 1;
			margin-right: 10px;
		}

		.el-icon {
			cursor: pointer;

			&:hover {
				color: red;
			}
		}
	}
}
</style>

```